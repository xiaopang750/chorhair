/*! company 罗格斯达 version 1.0.0 2015-06-17 */
define("api/global",["../lib/ooClass/class","./ui","./device","./webview","./pageStorage"],function(t,e,n){var i=t("../lib/ooClass/class"),o=t("./ui"),a=t("./device"),r=t("./webview");t("./pageStorage"),$("[refresh-page]").click(function(){var t=r.nowView();t.reload(!0)});var s=i.create(o,{initialize:function(){this.nowPageLevel=parseInt($("body").attr("pageLevel"));var t=this;window.plus?this.pageReady():a.deviceReady(function(){t.pageReady()})},pageReady:function(){a.confirmQuit(this.nowPageLevel),this.clickHref()},clickHref:function(){$(document).on("click","[uilink]",function(){var t=$(this).attr("href");return r.toPage(t),!1})},toPage:r.toPage});n.exports=s}),define("lib/ooClass/class",[],function(t,e,n){function i(t){return this instanceof i||!f(t)?void 0:a(t)}function o(t){var e,n;for(e in t)n=t[e],i.Mutators.hasOwnProperty(e)?i.Mutators[e].call(this,n):this.prototype[e]=n}function a(t){return t.extend=i.extend,t.implement=o,t}function r(){}function s(t,e,n){for(var i in e)if(e.hasOwnProperty(i)){if(n&&-1===p(n,i))continue;"prototype"!==i&&(t[i]=e[i])}}i.create=function(t,e){function n(){t.apply(this,arguments),this.constructor===n&&this.initialize&&this.initialize.apply(this,arguments)}return f(t)||(e=t,t=null),e||(e={}),t||(t=e.Extends||i),e.Extends=t,t!==i&&s(n,t,t.StaticsWhiteList),o.call(n,e),a(n)},i.extend=function(t){return t||(t={}),t.Extends=this,i.create(t)},i.Mutators={Extends:function(t){var e=this.prototype,n=u(t.prototype);s(n,e),n.constructor=this,this.prototype=n,this.superclass=t.prototype},Implements:function(t){l(t)||(t=[t]);for(var e,n=this.prototype;e=t.shift();)s(n,e.prototype||e)},Statics:function(t){s(this,t)}};var u=Object.__proto__?function(t){return{__proto__:t}}:function(t){return r.prototype=t,new r},c=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===c.call(t)},f=function(t){return"[object Function]"===c.call(t)},p=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1};n.exports=i}),define("api/ui",["lib/ooClass/class"],function(t,e,n){var i=t("lib/ooClass/class"),o=i.create({initialize:function(){},show:function(t,e){t=t||"",plus.nativeUI.showWaiting(t,e)},hide:function(){plus.nativeUI.closeWaiting()}}),a=i.create({initialize:function(){},confirm:function(t){t=t||{};var e=t.buttons||["确认","取消"];plus.nativeUI.confirm(t.content,function(e){"0"==e.index&&t.onConfrim&&t.onConfrim(e)},t.title,e)}}),r=i.create({initialize:function(){},tip:function(t){var t;t=t||{},window.plus?"Android"!=plus.os.name?(t.content=t.content||"",t.onClose=t.onClose||null,t.title=t.title||"",t.doneStr=t.doneStr||"好",plus.nativeUI.alert(t.content,function(){t.onClose&&t.onClose()},t.title,t.doneStr)):(t=t||{},t.duration=t.duration||"short",t.align=t.align||"center",t.verticalAlign=t.verticalAlign||"bottom",t.content=t.content||"",plus.nativeUI.toast(t.content)):alert(t.content)}}),s=i.create({initialize:function(){},pick:function(t,e,n){n=n||{},plus.nativeUI.pickDate(function(e){var n=e.date,i={};i.year=n.getFullYear(),i.month=n.getMonth(),i.day=n.getDate(),i.hour=n.getHours(),i.min=n.getMinutes(),i.sec=n.getSeconds(),t&&t(i)},function(t){e&&e(t.message)},n)}}),u=i.create({initialize:function(){},pick:function(t,e,n){n=n||{},plus.nativeUI.pickTime(function(e){var n=e.date,i={};i.hour=n.getHours(),i.min=n.getMinutes(),i.sec=n.getSeconds(),t&&t(i)},function(t){e&&e(t.message)},n)}}),c=new r,l=new a,f=new o,p=new s,d=new u,h=i.create({initialize:function(){},uiInfo:c,uiConfirm:l,uiLoading:f,uiCalendar:p,uiTime:d});n.exports=h}),define("api/device",["lib/ooClass/class","api/webview","api/ui","api/pageStorage"],function(t){var e=t("lib/ooClass/class");t("api/webview");var n=t("api/pageStorage"),i=t("api/ui"),o=new i;window.deviceQuit=function(){var t=confirm("确认退出？");t&&r.quit()},window.deviceBack=function(){var t=plus.webview.currentWebview();t.hide("auto",200)},window.otherPageBack=function(t){plus.key.addEventListener("backbutton",function(){var e=plus.webview.getWebviewById(t);e.hide("auto",200)},!1)};var a=e.create({initialize:function(){},deviceReady:function(t){document.addEventListener("plusready",function(){t&&t()},!1)},quit:function(){o.uiLoading.show(),n.clear(),localStorage.arrPage="",setTimeout(function(){plus.runtime.quit()},1e3)},back:function(){},confirmQuit:function(t){if(1==t){n.clear();var e=window.location.href;n.add(e),plus.key.addEventListener("backbutton",deviceQuit,!1)}else t>1&&plus.key.addEventListener("backbutton",deviceBack,!1)}}),r=new a;return r}),define("api/webview",["lib/ooClass/class","api/ui","api/pageStorage"],function(t){var e=t("lib/ooClass/class"),n=t("api/ui"),i=new n,o=t("api/pageStorage"),a=e.create({initialize:function(t){t=t||{},this.ani=t.as||"slide-in-right",this.time=t.at||"200",this.preate=t.preate||{},this._openw=t._openw||null},show:function(t,e,n,i){t.show(e,n,i)},hide:function(t,e,n,i){t.hide(e,n,i)},close:function(t,e,n,i){t.hide(e,n,i)},nowView:function(){return plus.webview.currentWebview()},getView:function(t){return plus.webview.getWebviewById(t)},create:function(t){return t=t||{},t.url=t.url||"",t.styles=t.styles||{scrollIndicator:"none",scalable:!1,popGesture:"hide"},t.otherData=t.otherData||{},o.add(t.url),t.url?plus.webview.create(t.url,t.url,t.styles,t.otherData):(console.log("未传入webview地址"),void 0)},onLoaded:function(t,e){t.addEventListener("loaded",function(){e&&e()})},onClose:function(t,e){t.addEventListener("close",function(){e&&e()})},viewShow:function(t,e){t.show(this.ani,this.time,e)},preateWebivew:function(t){var e=this;if(!this.preate[t]){var n=this.create({url:t});this.preate[t]=n,this.onClose(n,function(){e._openw=null,e.preate[t]&&(e.preate[t]=null)})}},loc:function(t){var e=this;this._openw||(this._openw=this.preate[t],this._openw?this._openw.showded?this._openw.viewShow():(this._openw.viewShow(),this._openw.showded=!0):(oLoading.show(),this._openw=this.create({url:t,otherData:{preate:!0}}),this.preate[t]=this._openw,this.onLoaded(this._openw,function(){oLoading.hide(),e.viewShow(e._openw),e._openw.showded=!0,e._openw=null}),this.onClose(this._openw,function(){e._openw=null,e.preate[t]&&(e.preate[t]=null)})))},toPage:function(t){var e,n;-1==t.indexOf("http://")?(t="http://"+window.location.host+t,n=!1):(plus.key.removeEventListener("backbutton",deviceQuit),n=!0),-1!=t.indexOf("?")?(t=t.split("?")[0],e=!0):e=!1,o.judgeSame(t,function(){i.uiLoading.show();var e=r.create({url:t});r.onLoaded(e,function(){r.viewShow(e),e.appendJsFile("_www/deji.js"),i.uiLoading.hide(),n&&otherPageBack(t)})},function(o){n&&otherPageBack(t);var a=r.getView(o);a.reload(!0),e?(i.uiLoading.show(),r.onLoaded(a,function(){r.viewShow(a),i.uiLoading.hide()})):r.viewShow(a)})}}),r=new a;return r}),define("api/pageStorage",["lib/ooClass/class"],function(t){var e=t("lib/ooClass/class"),n=e.create({initialize:function(){this.pageName="arrPage"},change:function(){var t=localStorage.arrPage,e=t?JSON.parse(t):[];return e},save:function(t,e){localStorage[t]=JSON.stringify(e)},add:function(t){var e=this.change();e.push(t),this.save(this.pageName,e)},clear:function(){localStorage[this.pageName]=""},judgeSame:function(t,e,n){var i=this.change();-1==i.indexOf(t)?e&&e(t):n&&n(t)}}),i=new n;return i});