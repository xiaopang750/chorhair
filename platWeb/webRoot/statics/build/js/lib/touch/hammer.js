/*! company 罗格斯达 version 1.0.0 2015-06-17 */
define("lib/touch/hammer",[],function(){(function(e,t,n,i){"use strict";function r(e,t,n){return setTimeout(l(e,n),t)}function o(e,t,n){return Array.isArray(e)?(s(e,n[t],n),!0):!1}function s(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;e.length>r;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function a(e,t,n){for(var r=Object.keys(t),o=0;r.length>o;)(!n||n&&e[r[o]]===i)&&(e[r[o]]=t[r[o]]),o++;return e}function c(e,t){return a(e,t,!0)}function u(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&a(i,n)}function l(e,t){return function(){return e.apply(t,arguments)}}function f(e,t){return typeof e==lt?e.apply(t?t[0]||i:i,t):e}function d(e,t){return e===i?t:e}function p(e,t,n){s(v(t),function(t){e.addEventListener(t,n,!1)})}function h(e,t,n){s(v(t),function(t){e.removeEventListener(t,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function v(e){return e.trim().split(/\s+/g)}function y(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;e.length>i;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function x(e,t,n){for(var i=[],r=[],o=0;e.length>o;){var s=t?e[o][t]:e[o];0>y(r,s)&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function w(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),s=0;ct.length>s;){if(n=ct[s],r=n?n+o:t,r in e)return r;s++}return i}function S(){return ht++}function k(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function T(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&n.handler(t)},this.init()}function C(e){var t,n=e.options.inputClass;return t=n?n:vt?I:yt?H:gt?z:$,new t(e,P)}function P(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Tt&&0===i-r,s=t&(Pt|Et)&&0===i-r;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,E(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function E(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=A(t)),r>1&&!n.firstMultiple?n.firstMultiple=A(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=t.center=_(i);t.timeStamp=pt(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=O(a,c),t.distance=D(a,c),R(n,t),t.offsetDirection=N(t.deltaX,t.deltaY),t.scale=s?M(s.pointers,i):1,t.rotation=s?j(s.pointers,i):0,q(n,t);var u=e.element;m(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function R(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};(t.eventType===Tt||o.eventType===Pt)&&(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function q(e,t){var n,r,o,s,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(t.eventType!=Et&&(c>kt||a.velocity===i)){var u=a.deltaX-t.deltaX,l=a.deltaY-t.deltaY,f=L(c,u,l);r=f.x,o=f.y,n=dt(f.x)>dt(f.y)?f.x:f.y,s=N(u,l),e.lastInterval=t}else n=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=s}function A(e){for(var t=[],n=0;e.pointers.length>n;)t[n]={clientX:ft(e.pointers[n].clientX),clientY:ft(e.pointers[n].clientY)},n++;return{timeStamp:pt(),pointers:t,center:_(t),deltaX:e.deltaX,deltaY:e.deltaY}}function _(e){var t=e.length;if(1===t)return{x:ft(e[0].clientX),y:ft(e[0].clientY)};for(var n=0,i=0,r=0;t>r;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:ft(n/t),y:ft(i/t)}}function L(e,t,n){return{x:t/e||0,y:n/e||0}}function N(e,t){return e===t?Rt:dt(e)>=dt(t)?e>0?qt:At:t>0?_t:Lt}function D(e,t,n){n||(n=jt);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function O(e,t,n){n||(n=jt);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function j(e,t){return O(t[1],t[0],Mt)-O(e[1],e[0],Mt)}function M(e,t){return D(t[0],t[1],Mt)/D(e[0],e[1],Mt)}function $(){this.evEl=It,this.evWin=Wt,this.allow=!0,this.pressed=!1,T.apply(this,arguments)}function I(){this.evEl=Bt,this.evWin=zt,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Ut,this.evWin=Gt,this.started=!1,T.apply(this,arguments)}function F(e,t){var n=b(e.touches),i=b(e.changedTouches);return t&(Pt|Et)&&(n=x(n.concat(i),"identifier",!0)),[n,i]}function H(){this.evTarget=Jt,this.targetIds={},T.apply(this,arguments)}function B(e,t){var n=b(e.touches),r=this.targetIds;if(t&(Tt|Ct)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,s,a=b(e.changedTouches),c=[],u=this.target;if(s=n.filter(function(e){return m(e.target,u)}),t===Tt)for(o=0;s.length>o;)r[s[o].identifier]=!0,o++;for(o=0;a.length>o;)r[a[o].identifier]&&c.push(a[o]),t&(Pt|Et)&&delete r[a[o].identifier],o++;return c.length?[x(s.concat(c),"identifier",!0),c]:i}function z(){T.apply(this,arguments);var e=l(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new $(this.manager,e)}function X(e,t){this.manager=e,this.set(t)}function U(e){if(g(e,tn))return tn;var t=g(e,nn),n=g(e,rn);return t&&n?nn+" "+rn:t||n?t?nn:rn:g(e,en)?en:Zt}function G(e){this.id=S(),this.manager=null,this.options=c(e||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=on,this.simultaneous={},this.requireFail=[]}function Y(e){return e&ln?"cancel":e&cn?"end":e&an?"move":e&sn?"start":""}function J(e){return e==Lt?"down":e==_t?"up":e==qt?"left":e==At?"right":""}function V(e,t){var n=t.manager;return n?n.get(e):e}function K(){G.apply(this,arguments)}function Q(){K.apply(this,arguments),this.pX=null,this.pY=null}function Z(){K.apply(this,arguments)}function et(){G.apply(this,arguments),this._timer=null,this._input=null}function tt(){K.apply(this,arguments)}function nt(){K.apply(this,arguments)}function it(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(e,t){return t=t||{},t.recognizers=d(t.recognizers,rt.defaults.preset),new ot(e,t)}function ot(e,t){t=t||{},this.options=c(t,rt.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=C(this),this.touchAction=new X(this,this.options.touchAction),st(this,!0),s(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function st(e,t){var n=e.element;s(e.options.cssProps,function(e,i){n.style[w(n.style,i)]=t?e:""})}function at(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ct=["","webkit","moz","MS","ms","o"],ut=t.createElement("div"),lt="function",ft=Math.round,dt=Math.abs,pt=Date.now,ht=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in e,vt=w(e,"PointerEvent")!==i,yt=gt&&mt.test(navigator.userAgent),bt="touch",xt="pen",wt="mouse",St="kinect",kt=25,Tt=1,Ct=2,Pt=4,Et=8,Rt=1,qt=2,At=4,_t=8,Lt=16,Nt=qt|At,Dt=_t|Lt,Ot=Nt|Dt,jt=["x","y"],Mt=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(k(this.element),this.evWin,this.domHandler)}};var $t={mousedown:Tt,mousemove:Ct,mouseup:Pt},It="mousedown",Wt="mousemove mouseup";u($,T,{handler:function(e){var t=$t[e.type];t&Tt&&0===e.button&&(this.pressed=!0),t&Ct&&1!==e.which&&(t=Pt),this.pressed&&this.allow&&(t&Pt&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:wt,srcEvent:e}))}});var Ft={pointerdown:Tt,pointermove:Ct,pointerup:Pt,pointercancel:Et,pointerout:Et},Ht={2:bt,3:xt,4:wt,5:St},Bt="pointerdown",zt="pointermove pointerup pointercancel";e.MSPointerEvent&&(Bt="MSPointerDown",zt="MSPointerMove MSPointerUp MSPointerCancel"),u(I,T,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ft[i],o=Ht[e.pointerType]||e.pointerType,s=o==bt,a=y(t,e.pointerId,"pointerId");r&Tt&&(0===e.button||s)?0>a&&(t.push(e),a=t.length-1):r&(Pt|Et)&&(n=!0),0>a||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var Xt={touchstart:Tt,touchmove:Ct,touchend:Pt,touchcancel:Et},Ut="touchstart",Gt="touchstart touchmove touchend touchcancel";u(W,T,{handler:function(e){var t=Xt[e.type];if(t===Tt&&(this.started=!0),this.started){var n=F.call(this,e,t);t&(Pt|Et)&&0===n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:e})}}});var Yt={touchstart:Tt,touchmove:Ct,touchend:Pt,touchcancel:Et},Jt="touchstart touchmove touchend touchcancel";u(H,T,{handler:function(e){var t=Yt[e.type],n=B.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:e})}}),u(z,T,{handler:function(e,t,n){var i=n.pointerType==bt,r=n.pointerType==wt;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(Pt|Et)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Vt=w(ut.style,"touchAction"),Kt=Vt!==i,Qt="compute",Zt="auto",en="manipulation",tn="none",nn="pan-x",rn="pan-y";X.prototype={set:function(e){e==Qt&&(e=this.compute()),Kt&&(this.manager.element.style[Vt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),U(e.join(" "))},preventDefaults:function(e){if(!Kt){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return t.preventDefault(),i;var r=this.actions,o=g(r,tn),s=g(r,rn),a=g(r,nn);return o||s&&n&Nt||a&&n&Dt?this.preventSrc(t):i}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var on=1,sn=2,an=4,cn=8,un=cn,ln=16,fn=32;G.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=V(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=V(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=V(e,this),-1===y(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=V(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?Y(i):""),e)}var n=this,i=this.state;cn>i&&t(!0),t(),i>=cn&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):(this.state=fn,i)},canEmit:function(){for(var e=0;this.requireFail.length>e;){if(!(this.requireFail[e].state&(fn|on)))return!1;e++}return!0},recognize:function(e){var t=a({},e);return f(this.options.enable,[this,t])?(this.state&(un|ln|fn)&&(this.state=on),this.state=this.process(t),this.state&(sn|an|cn|ln)&&this.tryEmit(t),i):(this.reset(),this.state=fn,i)},process:function(){},getTouchAction:function(){},reset:function(){}},u(K,G,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(sn|an),r=this.attrTest(e);return i&&(n&Et||!r)?t|ln:i||r?n&Pt?t|cn:t&sn?t|an:sn:fn}}),u(Q,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ot},getTouchAction:function(){var e=this.options.direction,t=[];return e&Nt&&t.push(rn),e&Dt&&t.push(nn),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&Nt?(r=0===o?Rt:0>o?qt:At,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?Rt:0>s?_t:Lt,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return K.prototype.attrTest.call(this,e)&&(this.state&sn||!(this.state&sn)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),u(Z,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&sn)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=1>e.scale?"in":"out";this.manager.emit(this.options.event+t,e)}}}),u(et,G,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Zt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Pt|Et)&&!o)this.reset();else if(e.eventType&Tt)this.reset(),this._timer=r(function(){this.state=un,this.tryEmit()},t.time,this);else if(e.eventType&Pt)return un;return fn},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===un&&(e&&e.eventType&Pt?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),u(tt,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&sn)}}),u(nt,K,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Nt|Dt,pointers:1},getTouchAction:function(){return Q.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Nt|Dt)?t=e.velocity:n&Nt?t=e.velocityX:n&Dt&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&dt(t)>this.options.velocity&&e.eventType&Pt},emit:function(e){var t=J(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(it,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[en]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&Tt&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!=Pt)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,a=!this.pCenter||D(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e;var c=this.count%t.taps;if(0===c)return this.hasRequireFailures()?(this._timer=r(function(){this.state=un,this.tryEmit()},t.interval,this),sn):un}return fn},failTimeout:function(){return this._timer=r(function(){this.state=fn},this.options.interval,this),fn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==un&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.4",rt.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[tt,{enable:!1}],[Z,{enable:!1},["rotate"]],[nt,{direction:Nt}],[Q,{direction:Nt},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[et]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dn=1,pn=2;ot.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?pn:dn},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&un)&&(r=t.curRecognizer=null);for(var o=0;i.length>o;)n=i[o],t.stopped===pn||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(sn|an|cn)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof G)return e;for(var t=this.recognizers,n=0;t.length>n;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(y(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return s(v(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return s(v(e),function(e){t?n[e].splice(y(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&at(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;n.length>i;)n[i](t),i++}},destroy:function(){this.element&&st(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(rt,{INPUT_START:Tt,INPUT_MOVE:Ct,INPUT_END:Pt,INPUT_CANCEL:Et,STATE_POSSIBLE:on,STATE_BEGAN:sn,STATE_CHANGED:an,STATE_ENDED:cn,STATE_RECOGNIZED:un,STATE_CANCELLED:ln,STATE_FAILED:fn,DIRECTION_NONE:Rt,DIRECTION_LEFT:qt,DIRECTION_RIGHT:At,DIRECTION_UP:_t,DIRECTION_DOWN:Lt,DIRECTION_HORIZONTAL:Nt,DIRECTION_VERTICAL:Dt,DIRECTION_ALL:Ot,Manager:ot,Input:T,TouchAction:X,TouchInput:H,MouseInput:$,PointerEventInput:I,TouchMouseInput:z,SingleTouchInput:W,Recognizer:G,AttrRecognizer:K,Tap:it,Pan:Q,Swipe:nt,Pinch:Z,Rotate:tt,Press:et,on:p,off:h,each:s,merge:c,extend:a,inherit:u,bindFn:l,prefixed:w}),e[n]=rt})(window,document,"Hammer"),function(){function e(e,t){var n=$(e);n.data("hammer")||n.data("hammer",new Hammer(n[0],t))}$.fn.hammer=function(t){return this.each(function(){e(this,t)})},Hammer.Manager.prototype.emit=function(e){return function(t,n){e.call(this,t,n),$(this.element).trigger({type:t,gesture:n})}}(Hammer.Manager.prototype.emit)}()});