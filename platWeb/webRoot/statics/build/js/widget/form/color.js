/*! company 罗格斯达 version 1.0.0 2015-06-17 */
define("widget/form/color",["../../lib/http/loadCss"],function(e,t,r){function n(e){e=e||{},this.zIndex=e.zIndex||999,this.wrapClassName=e.wrapClassName||"widget-color-wrap",this.dotClassName=e.dotClassName||"widget-color-dot",this.inputEle=null}var o=e("../../lib/http/loadCss");o(R.uri.css+"widget/form/color.css"),n.prototype={init:function(){this.createLay(),this.createColor(),this.aDot=$("[widget-color-dot]"),this.events()},loadCss:function(e){var t=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("link");r.rel="stylesheet",r.href=e,t.appendChild(r)},events:function(){var e=this;$(document).on("click","[widget-color]",function(){return e.inputEle=$(this),e.showLay($(this)),!1}),this.oLay.on("mouseover","[widget-color-dot]",function(){e.aDot.removeClass("active"),$(this).addClass("active")}),this.oLay.on("mouseleave",function(){e.aDot.removeClass("active")}),$(document).on("click",function(){var t=e.oLay.is(":visible");t&&e.oLay.hide()}),this.oLay.on("click","[widget-color-dot]",function(){var t,r=$(this).css("backgroundColor");t="#"==r.charAt(0)?r:e.RGB2Hex(r),e.inputEle.val(t),e.aDot.removeClass("active"),$(this).addClass("active"),e.onSelect&&e.onSelect(e.inputEle,t)})},RGB2Hex:function(e){if(/^(rgb|RGB)/.test(e)){for(var t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r="#",i=0;t.length>i;i++){var n=Number(t[i]).toString(16);"0"===n&&(n+=n),r+=n}return 7!==r.length&&(r=e),r}if(!reg.test(e))return e;var o=e.replace(/#/,"").split("");if(6===o.length)return e;if(3===o.length){for(var a="#",i=0;o.length>i;i+=1)a+=o[i]+o[i];return a}},createColor:function(){var e=["00","33","66","99","CC","FF"],t="";for(i=0;2>i;i++)for(j=0;6>j;j++)for(t+="<tr height=15>",k=0;3>k;k++)for(l=0;6>l;l++)t=t+"<td width=15 widget-color-select><span class="+this.dotClassName+' style="cursor:pointer;background-color:#'+e[k+3*i]+e[l]+e[j]+'" widget-color-dot></span>';t='<table cellspacing="0" cellpadding="0" border="0" class='+this.wrapClassName+">"+t+"</table>",this.oLay.html(t)},createLay:function(){this.oLay=$("<div></div>"),this.oLay.css({position:"absolute",left:0,top:0,display:"none",zIndex:this.zIndex}),$("body").append(this.oLay)},set:function(e,t){this.oLay.css({left:e,top:t})},showLay:function(e){var t=e.offset().left,r=e.offset().top+e.outerHeight(!0);this.set(t,r),this.oLay.show()},getLay:function(){return this.oLay}};var a=new n;a.init(),r.exports=a});