/*! company 罗格斯达 version 1.0.0 2015-06-17 */
define("widget/dom/related",["../../lib/template/template","../../widget/http/request"],function(e,t,r){function i(e){this.oMain=e.oMain||null,this.oSub=e.oSub||null,this.MainUrl=e.MainUrl||"",this.SubUrl=e.SubUrl||"",this.tplMain=e.tplMain||"",this.tplSub=e.tplSub||"",this.firstLoad=e.firstLoad?!0:!1,this.paramName=e.paramName||"district_pcode"}var n=e("../../lib/template/template"),o=e("../../widget/http/request");i.prototype={init:function(){this.events()},events:function(){var e=this;e.firstLoad&&this.load(this.MainUrl,"",function(t){e.renderSelect(e.oMain,t.data.province,e.tplMain),e.renderSelect(e.oSub,t.data.city,e.tplSub)}),this.oMain.on("change",function(){e.changeDo($(this))})},changeDo:function(e){var t=e.get(0).selectedIndex,r=e.children().eq(t).attr("id"),i=this,n={};n[this.paramName]=r,this.load(this.SubUrl,n,function(e){i.renderSelect(i.oSub,e.data,i.tplSub)})},load:function(e,t,r){o({url:e,data:t,sucDo:function(e){r&&r(e)}})},renderSelect:function(e,t,r){if(t){var i;i=t.length;var o=n.compile(r),a=o(t);e.html(a)}}},r.exports=i});