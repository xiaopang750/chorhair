/*! company 罗格斯达 version 1.0.0 2015-06-17 */
define("widget/dom/roll",["../../lib/event/scroll"],function(e){function t(e,t){this.ele=e,this.h=t,this.nowTop=0}e("../../lib/event/scroll"),$.fn.roll=function(e){e=e||60;var r;return $(this).each(function(){r=new t($(this),e),r.init()})},t.prototype={init:function(){this.getHeight(),this.max>this.h&&this.start()},start:function(){this.initWrap(),this.makeWrap(),this.events()},events:function(){var e=this;e=this,this.ele.scroll(function(t){t?e.nowTop+=10:e.nowTop-=10,e.move()})},initWrap:function(){var e,t,r,i;e=this.ele.innerWidth(!0),t=this.ele.css("left"),r=this.ele.css("top"),i=this.ele.children(),this.oContentWrap=$('<div sc="ui-roll-wrap"></div>'),this.ele.append(this.oContentWrap),this.oContentWrap.append(i),this.oContentWrap.css({top:0,left:0,width:this.ele.outerWidth(!0),position:"absolute"}),this.ele.css({height:this.h,overflow:"hidden"})},makeWrap:function(){this.oRollWrap=$("<div></div>"),this.oMove=$("<div></div>"),this.oMove.css({position:"absolute",left:0,top:0,height:"10px",width:"10px",background:"green",overflow:"hidden"}),this.oRollWrap.css({position:"absolute",right:0,top:0,height:this.max,width:"10px",background:"#ccc",overflow:"hidden"}),this.oRollWrap.append(this.oMove),this.ele.append(this.oRollWrap)},getHeight:function(){this.max=this.ele.height()+parseInt(this.ele.css("padding-top"))+parseInt(this.ele.css("padding-bottom"))},move:function(){var e,t,r;e=this.h-10,0>this.nowTop&&(this.nowTop=0),this.nowTop>e&&(this.nowTop=e),t=this.nowTop/e,r=-t*(this.max-this.h),this.oMove.css("top",this.nowTop),this.oContentWrap.css("top",r)}}});